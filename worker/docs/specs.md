# Specifications

## File structure:

```
/tmp/NerfNetWorker
|__ dataset0    # Some unique ID.
    |__ raw_data    # Raw user data as images.
        |__ 0.jpg
        |__ 1.jpg
        ...
    |__ colmap_data    # Output of ns-process-data
        ...
    |__ nerfs
        |__ nerf0    # Some unique nerf name.
            |__ ns_config.yml    # Config generated by nerfstudio.
            |__ config.json    # Serialization of RunConfig.
            |__ model.ckpt    # Nerf model weights.
            |__ model_fname.txt    # Contains original weights filename (e.g. "step-0001000.ckpt")
    |__ status.json    # Metadata or status.
|__ dataset0.tar.gz    # Created on demand.
|__ dataset0.nerf0    # ns-train working directory.
    ...    # Output of ns-train
...
```

Each individual dataset (e.g. `run0`) is stored in our database as a `tar.gz`.

The workflow on our backend server is:

- Receive request to do something
- Pull existing dataset from database
- Unpack dataset tarball
- Do something
- Repack dataset tarball
- Push dataset to database
